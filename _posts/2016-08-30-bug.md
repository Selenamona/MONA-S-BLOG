---
layout:     post
title:      项目问题汇总 bugs
summary: 
categories: Js
technique: true
---


## | CSS 高度设置

**父元素设置 min-height 子元素 height 100% 无效**

父元素添加相对定位，子元素添加绝对定位；

## | v-for key 值引起的问题

![](https://raw.githubusercontent.com/Selenamona/Selenamona.github.io/master/assets/images/bug1.jpg)

![](https://raw.githubusercontent.com/Selenamona/Selenamona.github.io/master/assets/images/bug2.jpg)

注意：两层循环遍历时，要保持 key 值唯一。


## | 移动端项目手机预览

config - index.js - host 添加本地IP 

```Js
    // Paths
    assetsSubDirectory: 'static',
    assetsPublicPath: '/',
    proxyTable: {},
    proxyTable: {  },
    host: '本地Ip', 
```

解决手机访问 IP ，页面显示标题不显示内容：

```javascript
host: '0.0.0.0',
devtool: 'inline-source-map'
```

## | vue 遮罩层阻止默认滚动事件


给遮罩层添加 `@touchmove.prevent`

`<div class="zhezhao" @touchmove.prevent ></div>`

若无遮罩层标签，动态添加，且对部分标签有效。如下两个 class 内不阻止默认事件，除此之外其他标签组织默认事件：

```javascript
window.addEventListener('touchmove',function(e){
    if(e.target.className !== "picker-item" && e.target.className !== 'picker-item picker-selected'){
        e.preventDefault(); 
    }
},{ passive: false })
```

**JS方法：**

当遮罩层出现时：`document.body.style.position = 'fixed'`;
当遮罩层消失时：`document.body.style.position = 'static'`;

（ 或者 overflow: hidden; position 容易出现样式错位问题，overflow 有时不太好使）

**点击两次**

iview 下拉选择时，弹出的 option 未选择，鼠标移出隐藏下拉，点击其他事件点击两次才能有效。第一次点击隐藏 option，第二次点击才是事件。


## | 解决端口被占用

1. Win+R  打开运行 ，输入cmd 打开命令行窗口   

2. 假设要查询端口8080被占用情况，在命令行下输入：`netstat  -aon|findstr  "8080" ` 

    ![](https://raw.githubusercontent.com/Selenamona/Selenamona.github.io/master/assets/images/easytip-port1.jpg)

3. 得到进程号 2996，继续输入命令： `tasklist|findstr  "2996"`   

    ![](https://raw.githubusercontent.com/Selenamona/Selenamona.github.io/master/assets/images/easytip-port2.jpg)

4. 得到进程映像名称  TNSLSNR.EXE   

5. Ctrl + Alt + delete 打开任务管理器，找到 名为 TNSLSNR.EXE的进程，右键，结束该进程

6. 这样端口被占用的问题就解决了

## | 小程序引用自定义组件报错

编译报`Component is not found in path '...'`   

```javascript
// 引用路径正确
{
    "usingComponents": {
        "date-pick": "../../components/date-pick/date-pick"
    }
}
```

解决：组件的 properties 应设置 type

```javascript
Component({ 
  properties: {
    hideMask:{
      type:Boolean,
      value:true
    }
  },
``` 

## | VScode cssrem插件使用

1. 搜索安装插件 cssrem

2. 设置根字体，setting.json ; 改完重启
```json
"cssrem.rootFontSize":100,  // 100px -> 1rem
"cssrem.fixedDigits": 2, 
// "cssrem.autoRemovePrefixZero": 自动移除0开头的前缀，默认：true。
```

3. 项目中做 rem 适配

```javascript
// 屏幕适配
(function(doc, win) {
  var docEl = doc.documentElement
  var resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize'
  var recalc = function() {
      var clientWidth = docEl.clientWidth
      if (!clientWidth) return
      docEl.style.fontSize = 100 * (clientWidth / 375) + 'px'  // 100px -> 1rem
  }
  if (!doc.addEventListener) return
  win.addEventListener(resizeEvt, recalc, false)
  doc.addEventListener('DOMContentLoaded', recalc, false)
})(document, window)
```
## | VSCode 一键生成.vue模版

1. 安装 Vetur 插件，识别 vue 文件
2. 新建代码片段： file -> preferences -> user snippets -> new Global snippets file -> 文件命名 vue.json
3. 添加自定义模板

```json
{
    "Print to console": {
        "prefix": "vue",
        "body": [
            "<!-- $1 -->",
            "<template>",
            "<div class='$2'>$5</div>",
            "</template>",
            "",
            "<script>",
            "//这里可以导入其他文件（比如：组件，工具js，第三方插件js，json文件，图片文件等等）",
            "//例如：import 《组件名称》 from '《组件路径》';",
            "",
            "export default {",
            "//import引入的组件需要注入到对象中才能使用",
            "components: {},",
            "data() {",
            "//这里存放数据",
            "return {",
            "",
            "};",
            "},",
            "//监听属性 类似于data概念",
            "computed: {},",
            "//监控data中的数据变化",
            "watch: {},",
            "//方法集合",
            "methods: {",
            "",
            "},",
            "//生命周期 - 创建完成（可以访问当前this实例）",
            "created() {",
            "",
            "},",
            "//生命周期 - 挂载完成（可以访问DOM元素）",
            "mounted() {",
            "",
            "},",
            "beforeCreate() {}, //生命周期 - 创建之前",
            "beforeMount() {}, //生命周期 - 挂载之前",
            "beforeUpdate() {}, //生命周期 - 更新之前",
            "updated() {}, //生命周期 - 更新之后",
            "beforeDestroy() {}, //生命周期 - 销毁之前",
            "destroyed() {}, //生命周期 - 销毁完成",
            "activated() {}, //如果页面有keep-alive缓存功能，这个函数会触发",
            "}",
            "</script>",
            "<style lang='scss' scoped>",
            "//@import url($3); 引入公共css类",
            "$4",
            "</style>"
        ],
        "description": "Log output to console"
    }
} 
```

4. "prefix": "vue"，定义快捷键；使用：输入 vue，按键盘的tab 
   



