---
layout:     post
title:      正则表达式
summary: 
categories: Js
technique: true
---

## | 正则整理

小数:`/^\d+\.\d+$/`
数字和字母组成:`/^[A-Za-z0-9]+$/`

中文和数字
`/^((?:[\u3400-\u4DB5\u4E00-\u9FEA\uFA0E\uFA0F\uFA11\uFA13\uFA14\uFA1F\uFA21\uFA23\uFA24\uFA27-\uFA29]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0])|(\d))+$/`

16进制颜色:`/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/`

密码强度校验，最少6位，包括至少1个大写字母，1个小写字母，1个数字，1个特殊字符:`/^\S*(?=\S{6,})(?=\S*\d)(?=\S*[A-Z])(?=\S*[a-z])(?=\S*[!@#$%^&*? ])\S*$/`


md5格式(32位):`/^([a-f\d]{32}|[A-F\d]{32})$/`


英文姓名:`/(^[a-zA-Z]{1}[a-zA-Z\s]{0,20}[a-zA-Z]{1}$)/`
车牌号(新能源):
`/[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领 A-Z]{1}[A-HJ-NP-Z]{1}(([0-9]{5}[DF])|([DF][A-HJ-NP-Z0-9][0-9]{4}))$/`
车牌号(非新能源):
`/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领 A-Z]{1}[A-HJ-NP-Z]{1}[A-Z0-9]{4}[A-Z0-9挂学警港澳]{1}$/`
车牌号(新能源+非新能源):`/^(?:[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领 A-Z]{1}[A-HJ-NP-Z]{1}(?:(?:[0-9]{5}[DF])|(?:[DF](?:[A-HJ-NP-Z0-9])[0-9]{4})))|(?:[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领 A-Z]{1}[A-Z]{1}[A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9 挂学警港澳]{1})$/`
 

date(日期):`/^\d{4}(-)(1[0-2]|0?\d)\1([0-2]\d|\d|30|31)$/`
email(邮箱):`/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/`

座机(tel phone)电话(国内),如: 0341-86091234:`/^\d{3}-\d{8}$|^\d{4}-\d{7,8}$/`

身份证号(1代,15位数字):`/^[1-9]\d{7}(?:0\d|10|11|12)(?:0[1-9]|[1-2][\d]|30|31)\d{3}$/`

身份证号(2代,18位数字),最后一位是校验位,可能为数字或字符X:`/^[1-9]\d{5}(?:18|19|20)\d{2}(?:0[1-9]|10|11|12)(?:0[1-9]|[1-2]\d|30|31)\d{3}[\dXx]$/`
身份证号, 支持1/2代(15位/18位数字):`/(^\d{8}(0\d|10|11|12)([0-2]\d|30|31)\d{3}$)|(^\d{6}(18|19|20)\d{2}(0[1-9]|10|11|12)([0-2]\d|30|31)\d{3}(\d|X|x)$)/`

护照（包含香港、澳门）:`/(^[EeKkGgDdSsPpHh]\d{8}$)|(^(([Ee][a-fA-F])|([DdSsPp][Ee])|([Kk][Jj])|([Mm][Aa])|(1[45]))\d{7}$)/`

ip-v4:`/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/`


ip-v6:`/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i`
 

微信号(wx)，6至20位，以字母开头，字母，数字，减号，下划线:`/^[a-zA-Z][-_a-zA-Z0-9]{5,19}$/`

邮政编码(中国):`/^(0[1-7]|1[0-356]|2[0-7]|3[0-6]|4[0-7]|5[1-7]|6[1-7]|7[0-5]|8[013-6])\d{4}$/`
火车车次:`/^[GCDZTSPKXLY1-9]\d{1,4}$/`

手机机身码(IMEI):`/^\d{15,17}$/`

必须带端口号的网址(或ip):`/^((ht|f)tps?:\/\/)?[\w-]+(\.[\w-]+)+:\d{1,5}\/?$/`

网址(url,支持端口和"?+参数"和"#+参数):`/^(((ht|f)tps?):\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&:/~+#-]*[\w@?^=%&/~+#-])?$/`

网址2:`/((http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?)/g`

统一社会信用代码: `/^[0-9A-HJ-NPQRTUWXY]{2}\d{6}[0-9A-HJ-NPQRTUWXY]{10}$/`

迅雷链接:`/^thunderx?:\/\/[a-zA-Z\d]+=$/`

ed2k链接(宽松匹配):`/^ed2k:\/\/\|file\|.+\|\/$/`

磁力链接(宽松匹配):`/^magnet:\?xt=urn:btih:[0-9a-fA-F]{40,}.*$/`

mac地址:`/^((([a-f0-9]{2}:){5})|(([a-f0-9]{2}-){5}))[a-f0-9]{2}$/i`
 
匹配连续重复的字符:`/(.)\1+/`

## | * 加密

手机号：    
`return phone && phone.length==11?phone.replace(/^([0-9]{3})[0-9]{4}([0-9]{4})$/,"$1****$2"):phone;`       
姓名:   
`return name && name.length>=2?name.replace(/^(.{1}).{1}(.*)$/,"$1*$2"):name;`     
身份证号：    
`return id && id.length==18?id.replace(/^([0-9]{6})[0-9]{8}([0-9]{4})$/,"$1********$2"):id;` 



## | 正则表达式 - 语法


**非打印字符**    

\cx | 匹配由x指明的控制字符   
\f	| 匹配一个换页符。等价于 \x0c 和 \cL 
\n	| 匹配一个换行符。等价于 \x0a 和 \cJ。
\r	| 匹配一个回车符。等价于 \x0d 和 \cM。
\s	| 匹配任何空白字符，包括空格、制表符、换页符等等。 
\S	| 匹配任何非空白字符。 
\t	| 匹配一个制表符。等价于 \x09 和 \cI。 
\v	| 匹配一个垂直制表符。等价于 \x0b 和 \cK。 

**特殊字符(匹配需转义)**

$ | 匹配输入字符串的结尾位置
()	 | 标记一个子表达式的开始和结束位置
* | 匹配前面的子表达式零次或多次
+ | 匹配前面的子表达式一次或多次
. | 匹配除换行符 \n 之外的任何单字符
[ | 标记一个中括号表达式的开始
? | 匹配前面的子表达式零次或一次，或指明一个非贪婪限定符
\ | 将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符
^ | 匹配输入字符串的开始位置，除非在方括号表达式中使用，此时它表示不接受该字符集合
{ | 标记限定符表达式的开始 
\| | 指明两项之间的一个选择 


**限定符**

\* | 匹配前面的子表达式零次或多次。* 等价于{0,}。
\+ | 匹配前面的子表达式一次或多次。+ 等价于 {1,}。
? | 匹配前面的子表达式零次或一次。? 等价于 {0,1}。
{n} | n 是一个非负整数。匹配确定的 n 次。
{n,} | n 是一个非负整数。至少匹配n 次。'o{1,}' 等价于 'o+'。'o{0,}' 则等价于 'o*'。
{n,m} | m 和 n 均为非负整数，其中n <= m。最少匹配 n 次且最多匹配 m 次。'o{0,1}' 等价于 'o?'。请注意在逗号和两个数之间不能有空格。


**定位符**

^ | 匹配输入字符串开始的位置。 
$ | 匹配输入字符串结尾的位置。 
\b | 匹配一个单词边界，即字与空格间的位置。
\B | 非单词边界匹配。

```javascript
value.replace(/[^\d]/, "") // 替换非数字为空
```
```javascript
@on-keyup="iptKeyUp($event,subjectIdx,'toPrivate')"
// 监听输入(必须数字，且不能超过两位小数)
iptKeyUp(e, subjectIdx, types) {
  let num;
  num = this.subjectData[subjectIdx][types];
  num = '' + num;

  num = num
      .replace(/[^\d.]/g, '') // 清除“数字”和“.”以外的字符
      .replace(/\.{2,}/g, '.') // 只保留第一个. 清除多余的
      .replace('.', '$#$')
      .replace(/\./g, '')
      .replace('$#$', '.')
      .replace(/^(\-)*(\d+)\.(\d\d).*$/, '$1$2.$3') // 只能输入两个小数
  if (num.indexOf('.') < 0 && num !== '') {
      // 以上已经过滤，此处控制的是如果没有小数点，首位不能为类似于 01、02的金额
      num = parseFloat(num)
  }
  this.subjectData[subjectIdx][types] = num;
}
```
